{"remainingRequest":"/usr/local/var/www/feifei/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/feifei/src/components/Editor.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/usr/local/var/www/feifei/src/components/Editor.vue","mtime":1630769380123},{"path":"/usr/local/var/www/feifei/node_modules/css-loader/index.js","mtime":1630734351541},{"path":"/usr/local/var/www/feifei/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1630734352656},{"path":"/usr/local/var/www/feifei/node_modules/postcss-loader/src/index.js","mtime":1630734352195},{"path":"/usr/local/var/www/feifei/node_modules/less-loader/dist/cjs.js","mtime":1630734397511},{"path":"/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js","mtime":1630734351377},{"path":"/usr/local/var/www/feifei/node_modules/vue-loader/lib/index.js","mtime":1630734352656}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\niframe {\n  height: 100%;\n  width: 100%;\n}\n.wedding-editor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 1;\n  transform-origin: 0 0;\n  -webkit-transform-origin: 0 0;\n  transition: all 1.6s cubic-bezier(0.4, 0, 1, 1);\n  -webkit-transition: all 1.6s cubic-bezier(0.4, 0, 1, 1);\n  .editor-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    padding: 12px;\n    overflow: hidden;\n    background: #2b2b48;\n    z-index: 3;\n    > a {\n      float: left;\n      display: block;\n      width: 16px;\n      height: 16px;\n      margin-right: 5px;\n      border-radius: 8px;\n      background: #fc615d;\n      &.minimum {\n        background: #fdbc40;\n      }\n      &.maximum {\n        background: #34c84a;\n      }\n    }\n  }\n  p.code {\n    margin: 0;\n    color: #bbb;\n    line-height: 1.2;\n    font-family: \"Roboto Mono\", \"Menlo\", \"Monaco\", Courier, monospace !important;\n    font-weight: 500 !important;\n    font-size: 16px !important;\n  }\n  pre {\n    margin: 0;\n    white-space: pre-wrap;\n    code {\n      white-space: pre-wrap;\n      word-break: break-all;\n      font-size: 16px !important;\n      margin: 0;\n      color: #bbb;\n      line-height: 1.2;\n      font-family: \"Roboto Mono\", \"Menlo\", \"Monaco\", Courier, monospace !important;\n      font-weight: 500 !important;\n      background: transparent;\n    }\n  }\n  .editor-open {\n    position: fixed;\n    right: 20px;\n    bottom: 20px;\n    width: 40px;\n    height: 40px;\n    padding: 6px;\n    border-radius: 20px;\n    text-align: center;\n    line-height: 18px;\n    border: 5px solid #ffd69b;\n    color: #a9895d;\n    background: #fff1de;\n    z-index: 1000;\n  }\n}\n",{"version":3,"sources":["Editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Editor.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"wedding-editor\" ref=\"editor\">\n    <!-- 打开邀请函 -->\n    <iframe\n      src=\"//player.bilibili.com/player.html?aid=207807073&bvid=BV1oh411W7KC&cid=402873261&page=1\"\n      scrolling=\"no\"\n      border=\"0\"\n      frameborder=\"no\"\n      framespacing=\"0\"\n      allowfullscreen=\"true\"\n    >\n    </iframe>\n\n    <div\n      class=\"editor-open\"\n      v-if=\"(canStart || hasClosed) && !canOpen\"\n      @click=\"canOpen = true\"\n    >\n      <svg\n        viewBox=\"0 0 24 24\"\n        width=\"18\"\n        height=\"18\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n        fill=\"none\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n        class=\"css-i6dzq1\"\n      >\n        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n        <line x1=\"9\" y1=\"3\" x2=\"9\" y2=\"21\"></line>\n      </svg>\n    </div>\n    <Executions\n      :canExecute=\"canExecute\"\n      @onUpdating=\"scrollToBottom\"\n      @onFinish=\"canOpen = true\"\n    />\n    <invitation\n      :canOpen=\"canOpen\"\n      @onClose=\"(canOpen = false), (hasClosed = true)\"\n      @sendBarrage=\"onAfterSending\"\n    />\n  </div>\n</template>\n\n<script>\nimport Prism from \"prismjs\";\nimport \"prismjs/themes/prism-okaidia.css\";\nimport \"../utils/raf\";\nimport data from \"../mock/data\";\n\nimport Executions from \"./Executions\";\nimport Invitation from \"./Invitation\";\n\nexport default {\n  name: \"Editor\",\n  components: { Executions, Invitation },\n  data() {\n    return {\n      startDate: \"\",\n      code: data.code,\n      currentCode: \"\",\n      isCursorVisible: 1,\n      canExecute: false,\n      canOpen: false,\n      wish: \"\",\n      hasClosed: false,\n      canStart: false,\n    };\n  },\n  created() {\n    this.startDate = new Date().toDateString();\n    this.progressivelyTyping();\n  },\n  updated() {\n    this.scrollToBottom();\n  },\n  computed: {\n    highlightedCode() {\n      const code = Prism.highlight(\n        this.currentCode,\n        Prism.languages.javascript\n      );\n      const codeWithCursor = `${code}<span style=\"opacity:${this.isCursorVisible}\"> ▍</span>`;\n      return codeWithCursor;\n    },\n  },\n  methods: {\n    scrollToBottom() {\n      // 保持页面一直滚到最下面\n      this.$refs.editor.scrollTop = 100000;\n    },\n    // 代码输入\n    progressivelyTyping() {\n      setTimeout(() => {\n        this.canExecute = true;\n        this.$emit(\"onFinish\");\n      }, 26000);\n    },\n    // 发送弹幕之后\n    onAfterSending(wish) {\n      this.wish = wish;\n      this.canOpen = false;\n      setTimeout(() => {\n        this.canStart = true;\n      }, 800);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\niframe {\n  height: 100%;\n  width: 100%;\n}\n.wedding-editor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 1;\n  transform-origin: 0 0;\n  -webkit-transform-origin: 0 0;\n  transition: all 1.6s cubic-bezier(0.4, 0, 1, 1);\n  -webkit-transition: all 1.6s cubic-bezier(0.4, 0, 1, 1);\n  .editor-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    padding: 12px;\n    overflow: hidden;\n    background: #2b2b48;\n    z-index: 3;\n    > a {\n      float: left;\n      display: block;\n      width: 16px;\n      height: 16px;\n      margin-right: 5px;\n      border-radius: 8px;\n      background: #fc615d;\n      &.minimum {\n        background: #fdbc40;\n      }\n      &.maximum {\n        background: #34c84a;\n      }\n    }\n  }\n  p.code {\n    margin: 0;\n    color: #bbb;\n    line-height: 1.2;\n    font-family: \"Roboto Mono\", \"Menlo\", \"Monaco\", Courier, monospace !important;\n    font-weight: 500 !important;\n    font-size: 16px !important;\n  }\n  pre {\n    margin: 0;\n    white-space: pre-wrap;\n    code {\n      white-space: pre-wrap;\n      word-break: break-all;\n      font-size: 16px !important;\n      margin: 0;\n      color: #bbb;\n      line-height: 1.2;\n      font-family: \"Roboto Mono\", \"Menlo\", \"Monaco\", Courier, monospace !important;\n      font-weight: 500 !important;\n      background: transparent;\n    }\n  }\n  .editor-open {\n    position: fixed;\n    right: 20px;\n    bottom: 20px;\n    width: 40px;\n    height: 40px;\n    padding: 6px;\n    border-radius: 20px;\n    text-align: center;\n    line-height: 18px;\n    border: 5px solid #ffd69b;\n    color: #a9895d;\n    background: #fff1de;\n    z-index: 1000;\n  }\n}\n</style>"]}]}