{"remainingRequest":"/usr/local/var/www/feifei/node_modules/babel-loader/lib/index.js!/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/feifei/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/feifei/src/components/Barrage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/feifei/src/components/Barrage.vue","mtime":1630759194788},{"path":"/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js","mtime":1630734351377},{"path":"/usr/local/var/www/feifei/node_modules/babel-loader/lib/index.js","mtime":1630734322281},{"path":"/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js","mtime":1630734351377},{"path":"/usr/local/var/www/feifei/node_modules/vue-loader/lib/index.js","mtime":1630734352656}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport _data from '../mock/data';\nexport default {\n  props: ['wish', 'canStart'],\n  data: function data() {\n    return {\n      barrages: _data.barrages,\n      animationStyle: '',\n      initialOffset: 0\n    };\n  },\n  computed: {\n    codeInStyleTag: function codeInStyleTag() {\n      return \"<style>\".concat(this.animationStyle, \"</style>\");\n    }\n  },\n  watch: {\n    canStart: function canStart(val) {\n      if (val === true) {\n        this.barrageAnimationStart();\n      }\n    }\n  },\n  methods: {\n    // 弹幕动画开始\n    barrageAnimationStart: function barrageAnimationStart() {\n      var _this = this;\n\n      var barrageWidth = this.getWidth(this.$refs.barrage);\n      var barrageWidthGroup = [this.getWidth(this.$refs.barrageFirst), this.getWidth(this.$refs.barrageSecond), this.getWidth(this.$refs.barrageThird), this.getWidth(this.$refs.barrageFourth)];\n      this.initialOffset = barrageWidth + 15;\n      barrageWidthGroup.map(function (item, index) {\n        _this.animationStyle += \"\\n          .barrage-\".concat(index, \"{\\n            animation: barrage-\").concat(index, \" \").concat(item / 40, \"s linear infinite;\\n            -webkit-animation: barrage-\").concat(index, \" \").concat(item / 40, \"s linear infinite;\\n          }\\n          @keyframes barrage-\").concat(index, \" {\\n            from {\\n              transform:translate3d(\").concat(barrageWidth + 15, \"px,0,0);\\n              -webkit-transform:translate3d(\").concat(barrageWidth + 15, \"px,0,0);\\n            }\\n            to {\\n              transform:translate3d(-\").concat(item + 15, \"px,0,0);\\n              -webkit-transform:translate3d(-\").concat(item + 15, \"px,0,0);\\n            }\\n          }\");\n      });\n    },\n    getWidth: function getWidth(ref) {\n      return window.getComputedStyle(ref, null).width.replace('px', '') - 0;\n    },\n    filterBarrage: function filterBarrage(barrages, remainder) {\n      if (barrages) {\n        return barrages.filter(function (barrage, index) {\n          if (index % 4 === remainder) {\n            return barrage;\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["Barrage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,KAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,MAAA,EAAA,UAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KAAA,CAAA,QADA;AAEA,MAAA,cAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,QAAA,EAAA;AACA,IAAA,cAAA,EAAA,0BAAA;AACA,8BAAA,KAAA,cAAA;AACA;AAHA,GATA;AAcA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,kBAAA,GAAA,EAAA;AACA,UAAA,GAAA,KAAA,IAAA,EAAA;AACA,aAAA,qBAAA;AACA;AACA;AALA,GAdA;AAqBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,qBAFA,mCAEA;AAAA;;AACA,UAAA,YAAA,GAAA,KAAA,QAAA,CAAA,KAAA,KAAA,CAAA,OAAA,CAAA;AACA,UAAA,iBAAA,GAAA,CACA,KAAA,QAAA,CAAA,KAAA,KAAA,CAAA,YAAA,CADA,EAEA,KAAA,QAAA,CAAA,KAAA,KAAA,CAAA,aAAA,CAFA,EAGA,KAAA,QAAA,CAAA,KAAA,KAAA,CAAA,YAAA,CAHA,EAIA,KAAA,QAAA,CAAA,KAAA,KAAA,CAAA,aAAA,CAJA,CAAA;AAMA,WAAA,aAAA,GAAA,YAAA,GAAA,EAAA;AACA,MAAA,iBAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,cAAA,mCACA,KADA,+CAEA,KAFA,cAEA,IAAA,GAAA,EAFA,wEAGA,KAHA,cAGA,IAAA,GAAA,EAHA,2EAKA,KALA,yEAOA,YAAA,GAAA,EAPA,mEAQA,YAAA,GAAA,EARA,6FAWA,IAAA,GAAA,EAXA,oEAYA,IAAA,GAAA,EAZA;AAeA,OAhBA;AAiBA,KA5BA;AA6BA,IAAA,QA7BA,oBA6BA,GA7BA,EA6BA;AACA,aAAA,MAAA,CAAA,gBAAA,CAAA,GAAA,EAAA,IAAA,EAAA,KAAA,CAAA,OAAA,CAAA,IAAA,EAAA,EAAA,IAAA,CAAA;AACA,KA/BA;AAgCA,IAAA,aAhCA,yBAgCA,QAhCA,EAgCA,SAhCA,EAgCA;AACA,UAAA,QAAA,EAAA;AACA,eAAA,QAAA,CAAA,MAAA,CAAA,UAAA,OAAA,EAAA,KAAA,EAAA;AACA,cAAA,KAAA,GAAA,CAAA,KAAA,SAAA,EAAA;AACA,mBAAA,OAAA;AACA;AACA,SAJA,CAAA;AAKA;AACA;AAxCA;AArBA,CAAA","sourcesContent":["<template>\n  <div class=\"wedding-barrage\" ref=\"barrage\" :style=\"{opacity: canStart ? 1 : 0}\">\n    <div v-html=\"codeInStyleTag\"></div>\n    <p class=\"code barrage-0\" ref=\"barrageFirst\" :style=\"{transform:'translate('+initialOffset+'px)',top:'10px'}\">\n      <span class=\"mine\">{{ wish }}</span>\n      <span v-for=\"(item, index) in filterBarrage(barrages, 0)\" :key=\"index\">{{ item }}</span>\n    </p>\n    <p class=\"code barrage-1\" ref=\"barrageSecond\" :style=\"{transform:'translate('+initialOffset+'px)',top:'40px'}\">\n      <span v-for=\"(item, index) in filterBarrage(barrages, 1)\" :key=\"index\">{{ item }}</span>\n    </p>\n    <p class=\"code barrage-2\" ref=\"barrageThird\" :style=\"{transform:'translate('+initialOffset+'px)',top:'70px'}\">\n      <span v-for=\"(item, index) in filterBarrage(barrages, 2)\" :key=\"index\">{{ item }}</span>\n    </p>\n    <p class=\"code barrage-3\" ref=\"barrageFourth\" :style=\"{transform:'translate('+initialOffset+'px)',top:'100px'}\">\n      <span v-for=\"(item, index) in filterBarrage(barrages, 3)\" :key=\"index\">{{ item }}</span>\n    </p>\n    <div class=\"barrage-space\"></div>\n  </div>\n</template>\n\n<script>\n  import data from '../mock/data'\n\n  export default {\n    props: ['wish', 'canStart'],\n    data(){\n      return {\n        barrages: data.barrages,\n        animationStyle:'',\n        initialOffset: 0\n      }\n    },\n    computed: {\n      codeInStyleTag: function () {\n        return `<style>${this.animationStyle}</style>`\n      }\n    },\n    watch: {\n      canStart: function (val) {\n        if (val===true) {\n          this.barrageAnimationStart()\n        }\n      }\n    },\n    methods: {\n      // 弹幕动画开始\n      barrageAnimationStart() {\n        let barrageWidth = this.getWidth(this.$refs.barrage)\n        let barrageWidthGroup = [\n              this.getWidth(this.$refs.barrageFirst),\n              this.getWidth(this.$refs.barrageSecond),\n              this.getWidth(this.$refs.barrageThird),\n              this.getWidth(this.$refs.barrageFourth)\n            ]\n        this.initialOffset = barrageWidth + 15\n        barrageWidthGroup.map((item,index) => {\n          this.animationStyle += `\n            .barrage-${index}{\n              animation: barrage-${index} ${item/40}s linear infinite;\n              -webkit-animation: barrage-${index} ${item/40}s linear infinite;\n            }\n            @keyframes barrage-${index} {\n              from {\n                transform:translate3d(${barrageWidth+15}px,0,0);\n                -webkit-transform:translate3d(${barrageWidth+15}px,0,0);\n              }\n              to {\n                transform:translate3d(-${item+15}px,0,0);\n                -webkit-transform:translate3d(-${item+15}px,0,0);\n              }\n            }`\n        })\n      },\n      getWidth(ref) {\n        return window.getComputedStyle(ref,null).width.replace('px','') - 0\n      },\n      filterBarrage(barrages, remainder) {\n        if(barrages){\n          return barrages.filter((barrage, index) => {\n            if(index%4 === remainder){\n              return barrage\n            }\n          })\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  .wedding-barrage{\n    position: relative;\n    p{\n      position: absolute;\n      padding: 5px 0;\n      white-space:nowrap;\n      transition: all 0.6s linear;\n      -webkit-transition: all 0.6s linear;\n      span{\n        padding: 0 15px;\n        &.mine{\n          color: #e6db74;\n          padding: 4px 6px;\n          border: 1px solid #e6db74;\n        }\n      }\n    }\n    .barrage-space{\n      height: 180px;\n    }\n  }\n</style>"],"sourceRoot":"src/components"}]}