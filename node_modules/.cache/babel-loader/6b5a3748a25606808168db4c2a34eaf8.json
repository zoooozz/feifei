{"remainingRequest":"/usr/local/var/www/feifei/node_modules/babel-loader/lib/index.js!/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/feifei/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/feifei/src/components/Editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/feifei/src/components/Editor.vue","mtime":1630760385592},{"path":"/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js","mtime":1630734351377},{"path":"/usr/local/var/www/feifei/node_modules/babel-loader/lib/index.js","mtime":1630734322281},{"path":"/usr/local/var/www/feifei/node_modules/cache-loader/dist/cjs.js","mtime":1630734351377},{"path":"/usr/local/var/www/feifei/node_modules/vue-loader/lib/index.js","mtime":1630734352656}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Prism from \"prismjs\";\nimport \"prismjs/themes/prism-okaidia.css\";\nimport \"../utils/raf\";\nimport _data from \"../mock/data\";\nimport Executions from \"./Executions\";\nimport Invitation from \"./Invitation\";\nexport default {\n  name: \"Editor\",\n  components: {\n    Executions: Executions,\n    Invitation: Invitation\n  },\n  data: function data() {\n    return {\n      startDate: \"\",\n      code: _data.code,\n      currentCode: \"\",\n      isCursorVisible: 1,\n      canExecute: false,\n      canOpen: false,\n      wish: \"\",\n      hasClosed: false,\n      canStart: false\n    };\n  },\n  created: function created() {\n    this.startDate = new Date().toDateString();\n    this.progressivelyTyping();\n  },\n  updated: function updated() {\n    this.scrollToBottom();\n  },\n  computed: {\n    highlightedCode: function highlightedCode() {\n      var code = Prism.highlight(this.currentCode, Prism.languages.javascript);\n      var codeWithCursor = \"\".concat(code, \"<span style=\\\"opacity:\").concat(this.isCursorVisible, \"\\\"> \\u258D</span>\");\n      return codeWithCursor;\n    }\n  },\n  methods: {\n    scrollToBottom: function scrollToBottom() {\n      // 保持页面一直滚到最下面\n      this.$refs.editor.scrollTop = 100000;\n    },\n    // 代码输入\n    progressivelyTyping: function progressivelyTyping() {\n      var _this = this;\n\n      setTimeout(function () {\n        _this.canExecute = true;\n\n        _this.$emit(\"onFinish\");\n      }, 5000);\n    },\n    // 发送弹幕之后\n    onAfterSending: function onAfterSending(wish) {\n      var _this2 = this;\n\n      this.wish = wish;\n      this.canOpen = false;\n      setTimeout(function () {\n        _this2.canStart = true;\n      }, 800);\n    }\n  }\n};",{"version":3,"sources":["Editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,OAAA,KAAA,MAAA,SAAA;AACA,OAAA,kCAAA;AACA,OAAA,cAAA;AACA,OAAA,KAAA,MAAA,cAAA;AAEA,OAAA,UAAA,MAAA,cAAA;AACA,OAAA,UAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,UAAA,EAAA,UAAA;AAAA,IAAA,UAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,KAAA,CAAA,IAFA;AAGA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,eAAA,EAAA,CAJA;AAKA,MAAA,UAAA,EAAA,KALA;AAMA,MAAA,OAAA,EAAA,KANA;AAOA,MAAA,IAAA,EAAA,EAPA;AAQA,MAAA,SAAA,EAAA,KARA;AASA,MAAA,QAAA,EAAA;AATA,KAAA;AAWA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,SAAA,GAAA,IAAA,IAAA,GAAA,YAAA,EAAA;AACA,SAAA,mBAAA;AACA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,cAAA;AACA,GAtBA;AAuBA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,SAAA,CACA,KAAA,WADA,EAEA,KAAA,CAAA,SAAA,CAAA,UAFA,CAAA;AAIA,UAAA,cAAA,aAAA,IAAA,mCAAA,KAAA,eAAA,sBAAA;AACA,aAAA,cAAA;AACA;AARA,GAvBA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,SAAA,GAAA,MAAA;AACA,KAJA;AAKA;AACA,IAAA,mBANA,iCAMA;AAAA;;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,IAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,UAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA,KAXA;AAYA;AACA,IAAA,cAbA,0BAaA,IAbA,EAaA;AAAA;;AACA,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA,OAFA,EAEA,GAFA,CAAA;AAGA;AAnBA;AAjCA,CAAA","sourcesContent":["<template>\n  <div class=\"wedding-editor\" ref=\"editor\">\n    <!-- 打开邀请函 -->\n    <iframe\n      src=\"//player.bilibili.com/player.html?aid=335149131&bvid=BV1aA411c7Gq&cid=401100630&page=1\"\n      scrolling=\"no\"\n      border=\"0\"\n      frameborder=\"no\"\n      framespacing=\"0\"\n      allowfullscreen=\"true\"\n    >\n    </iframe>\n\n    <div\n      class=\"editor-open\"\n      v-if=\"(canStart || hasClosed) && !canOpen\"\n      @click=\"canOpen = true\"\n    >\n      <svg\n        viewBox=\"0 0 24 24\"\n        width=\"18\"\n        height=\"18\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n        fill=\"none\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n        class=\"css-i6dzq1\"\n      >\n        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n        <line x1=\"9\" y1=\"3\" x2=\"9\" y2=\"21\"></line>\n      </svg>\n    </div>\n    <Executions\n      :canExecute=\"canExecute\"\n      @onUpdating=\"scrollToBottom\"\n      @onFinish=\"canOpen = true\"\n    />\n    <invitation\n      :canOpen=\"canOpen\"\n      @onClose=\"(canOpen = false), (hasClosed = true)\"\n      @sendBarrage=\"onAfterSending\"\n    />\n  </div>\n</template>\n\n<script>\nimport Prism from \"prismjs\";\nimport \"prismjs/themes/prism-okaidia.css\";\nimport \"../utils/raf\";\nimport data from \"../mock/data\";\n\nimport Executions from \"./Executions\";\nimport Invitation from \"./Invitation\";\n\nexport default {\n  name: \"Editor\",\n  components: { Executions, Invitation },\n  data() {\n    return {\n      startDate: \"\",\n      code: data.code,\n      currentCode: \"\",\n      isCursorVisible: 1,\n      canExecute: false,\n      canOpen: false,\n      wish: \"\",\n      hasClosed: false,\n      canStart: false,\n    };\n  },\n  created() {\n    this.startDate = new Date().toDateString();\n    this.progressivelyTyping();\n  },\n  updated() {\n    this.scrollToBottom();\n  },\n  computed: {\n    highlightedCode() {\n      const code = Prism.highlight(\n        this.currentCode,\n        Prism.languages.javascript\n      );\n      const codeWithCursor = `${code}<span style=\"opacity:${this.isCursorVisible}\"> ▍</span>`;\n      return codeWithCursor;\n    },\n  },\n  methods: {\n    scrollToBottom() {\n      // 保持页面一直滚到最下面\n      this.$refs.editor.scrollTop = 100000;\n    },\n    // 代码输入\n    progressivelyTyping() {\n      setTimeout(() => {\n        this.canExecute = true;\n        this.$emit(\"onFinish\");\n      }, 5000);\n    },\n    // 发送弹幕之后\n    onAfterSending(wish) {\n      this.wish = wish;\n      this.canOpen = false;\n      setTimeout(() => {\n        this.canStart = true;\n      }, 800);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\niframe {\n  height: 100%;\n}\n.wedding-editor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding: 15px;\n  padding-top: 50px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 1;\n  transform-origin: 0 0;\n  -webkit-transform-origin: 0 0;\n  transition: all 1.6s cubic-bezier(0.4, 0, 1, 1);\n  -webkit-transition: all 1.6s cubic-bezier(0.4, 0, 1, 1);\n  .editor-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    padding: 12px;\n    overflow: hidden;\n    background: #2b2b48;\n    z-index: 3;\n    > a {\n      float: left;\n      display: block;\n      width: 16px;\n      height: 16px;\n      margin-right: 5px;\n      border-radius: 8px;\n      background: #fc615d;\n      &.minimum {\n        background: #fdbc40;\n      }\n      &.maximum {\n        background: #34c84a;\n      }\n    }\n  }\n  p.code {\n    margin: 0;\n    color: #bbb;\n    line-height: 1.2;\n    font-family: \"Roboto Mono\", \"Menlo\", \"Monaco\", Courier, monospace !important;\n    font-weight: 500 !important;\n    font-size: 16px !important;\n  }\n  pre {\n    margin: 0;\n    white-space: pre-wrap;\n    code {\n      white-space: pre-wrap;\n      word-break: break-all;\n      font-size: 16px !important;\n      margin: 0;\n      color: #bbb;\n      line-height: 1.2;\n      font-family: \"Roboto Mono\", \"Menlo\", \"Monaco\", Courier, monospace !important;\n      font-weight: 500 !important;\n      background: transparent;\n    }\n  }\n  .editor-open {\n    position: fixed;\n    right: 20px;\n    bottom: 20px;\n    width: 40px;\n    height: 40px;\n    padding: 6px;\n    border-radius: 20px;\n    text-align: center;\n    line-height: 18px;\n    border: 5px solid #ffd69b;\n    color: #a9895d;\n    background: #fff1de;\n    z-index: 1000;\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}